<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>

<body>
    <div class="d-flex justify-content-start" style="margin-left: 300px; margin-bottom: 100px;">
        <a class="navbar-brand" href="#"><img class="logo mt-3" src="./source/img/TRaM_logo.png" style="width: 50px;"
                alt="이미지" id="logoMain"></a>
    </div>
    <div class="container-fluid">
        <div class="my-5">
            <div class="row">
                <div class="col p-3">
                    <div class="border form-control w-50" style="margin-left: 25rem;">
                        <div class="m-3 ps-5 text-center">
                            <h2>비밀번호 재설정</h1>
                        </div>
                        <!-- TODO 위치 조정하기-->
                        <div class="p-3">
                            <h5 style="margin-left: 15%;" class="">이메일</h5>
                            <input type="email" class="w-50" placeholder="TRaM@gmail.com"
                                style="height: 40px; margin-left: 15%;" id="idEmail">
                        </div>
                        <div class="row">
                            <div class="col-4">
                                <button class="w-25 btn btn-outline-success" style="margin-left: 39%;"
                                    id="cancel">취소</button>
                            </div>
                            <div class="col-4">
                                <button class="w-25 btn btn-outline-success" style="margin-left: 39%;"
                                    id="confirm">확인</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
<script src="./source/out_link/Util.js"></script>
<script>

    let idEmail = document.querySelector("#idEmail");
    let confirmBtn = document.querySelector("#confirm");
    let cancelBtn = document.querySelector("#cancel");

    confirmBtn.addEventListener("click", function () {
        let Users = getLocalStorage(1);

        // TODO 비밀번호 변경
        // 변경된 PW 를 localStorage 에 set 으로 넣어주기
        for (let i = 0; i < Users.length; i++) {
            if (idEmail.value == Users[i].User_id) {
                alert(`조회된 당신의 계정 정보\n [ ID : ${Users[i].User_id} ] 입니다.`);
                let newPw = prompt(`변경할 패스워드를 입력하세요`);
                Users[i].User_pw = newPw;
                SetLocalStorageNewUserData(Users);
                alert("회원정보 변경이 완료되었습니다!");
                window.history.back();
                return;
            }

            // 로그인 실패
            if (i == Users.length - 1) {
                alert("일치하는 정보가 없습니다.");
            }
        }
    })

    cancelBtn.addEventListener("click", function() {
        window.history.back();
    })

    // 아이디 비번 찾는 페이지
    const logoMain = document.querySelector("#logoMain");
    logoMain.addEventListener("click", function () {
        window.open("index.html", "_self");
    })


</script>

</html>